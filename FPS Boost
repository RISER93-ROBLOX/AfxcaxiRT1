repeat
    task.wait()
until game:IsLoaded() and game.Players.LocalPlayer:FindFirstChild("DataLoaded")

local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Lighting = game.Lighting
local Workspace = game.Workspace
local Terrain = Workspace:FindFirstChildOfClass('Terrain')

setfpscap(60)
UserSettings():GetService("UserGameSettings").MasterVolume = 0
sethiddenproperty(Lighting, "Technology", 2)
sethiddenproperty(Terrain, "Decoration", false)

Terrain.WaterWaveSize = 0
Terrain.WaterWaveSpeed = 0
Terrain.WaterReflectance = 0
Terrain.WaterTransparency = 0
Lighting.GlobalShadows = false
Lighting.FogEnd = 9e9
Lighting.Brightness = 0
settings().Rendering.QualityLevel = 1

local function modifyObject(v)
    if v:IsA("BasePart") then
        v.Material = "Plastic"
        v.Reflectance = 0
        v.Transparency = 1
    elseif v:IsA("Decal") or v:IsA("Texture") then
        v.Transparency = 1
    elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
        v.Lifetime = NumberRange.new(0)
    elseif v:IsA("Explosion") then
        v.BlastPressure = 1
        v.BlastRadius = 1
    elseif v:IsA("Fire") or v:IsA("SpotLight") or v:IsA("Smoke") or v:IsA("Sparkles") then
        v.Enabled = false
    elseif v:IsA("MeshPart") then
        v.TextureID = 10385902758728957
        v.Material = "Plastic"
        v.Reflectance = 0
    elseif v:IsA("SpecialMesh") then
        v.TextureId = 0
    elseif v:IsA("ShirtGraphic") then
        v.Graphic = 1
    elseif v:IsA("Shirt") or v:IsA("Pants") then
        v[v.ClassName.."Template"] = 1
    elseif v:IsA("Accessory") or v:IsA("Hat") then
        v:Destroy()
    elseif v:IsA("BodyColors") then
        v:Destroy()
    end
end

for _, v in pairs(Workspace:GetDescendants()) do
    modifyObject(v)
end

for _, e in ipairs(Lighting:GetChildren()) do
    if e:IsA("BlurEffect") or e:IsA("SunRaysEffect") or e:IsA("ColorCorrectionEffect") or e:IsA("BloomEffect") or e:IsA("DepthOfFieldEffect") then
        e.Enabled = false
    end
end

local function removePlayerEffects(player)
    if player.Character then
        local char = player.Character
        for _, v in pairs(char:GetChildren()) do
            if v:IsA("Accessory") or v:IsA("Hat") or v:IsA("Shirt") or v:IsA("Pants") or v:IsA("ShirtGraphic") or v:IsA("BodyColors") then
                v:Destroy()
            elseif v:IsA("Part") then
                v.Transparency = 1  
            elseif v:IsA("MeshPart") then
                v.TextureID = 10385902758728957  
                v.Material = "Plastic"
                v.Reflectance = 0
            elseif v:IsA("Humanoid") then
                v.Health = 0  
                v.WalkSpeed = 0
                v.JumpHeight = 0
            end
        end
    end
end

game.Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function()
        task.wait(1)  -- Ensure the character has loaded
        removePlayerEffects(player)
    end)
end)

Workspace.DescendantAdded:Connect(function(child)
    task.spawn(function()
        -- Apply modifications to any new object
        modifyObject(child)
    end)
end)

local function WindowFocusReleasedFunction()
    RunService:Set3dRenderingEnabled(false)
    setfpscap(60)
end

local function WindowFocusedFunction()
    RunService:Set3dRenderingEnabled(true)
    setfpscap(60)
end

UserInputService.WindowFocusReleased:Connect(WindowFocusReleasedFunction)
UserInputService.WindowFocused:Connect(WindowFocusedFunction)

local function applyTransparencyToParts(parts)
    for _, v in pairs(parts) do
        if v:IsA("BasePart") then
            v.Transparency = 1
        end
    end
end

applyTransparencyToParts(workspace:GetDescendants())

for _, v in ipairs(getnilinstances()) do
    if v:IsA("BasePart") then
        v.Transparency = 1
    end
    applyTransparencyToParts(v:GetDescendants())
end

Workspace.DescendantAdded:Connect(function(v)
    task.spawn(function()
        if v:IsA("BasePart") then
            v.Transparency = 1
        end
    end)
end)
